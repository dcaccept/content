---
- name: Gather VLAN Information
  hosts: switches
  gather_facts: no
  connection: network_cli
  tasks:
    - name: Retrieve VLAN information
      ios_command:
        commands:
          - show vlan brief
      register: vlan_output

    - name: Extract VLAN ID and Name
      set_fact:
        vlan_info: "{{ vlan_output.stdout[0] | regex_findall('^(\\d+)\\s+(\\S+.*\\S+)\\s+\\S+\\s+\\S+', multiline=True) }}"

    - name: Display VLAN Information
      debug:
        msg: "{{ vlan_info }}"
